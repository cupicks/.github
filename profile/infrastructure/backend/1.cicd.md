[< 뒤로가기](./README.md)

## 1. CI/CD

```cmd
  1.1. 필요성
  1.2. 비교 대상 및 선택 동기
  1.3. 후기
```

### 필요성

팀에서 추구하는 가치인 ***안정성과 지속저인 협업*** 을 달성하기 위해서 서로 많은 피드백을 교류하였습니다.
이 과정에서 짧은 기간이지만 ***BugFix, HotFix*** 등을 통해서 잦은 재배포를 진행하게 되었습니다.

이러한 과정을 매번 ***ssh*** 를 통해서 진행하였고 매번 ***5분 ~ 10분*** 씩 시간이 소모되었습니다.
이 시간이 백엔드의 생산성을 저해한다고 판단해서 ***CI/CD*** 를 도입해야 한다고 느꼈습니다.

- Issue : https://github.com/cupicks/cupicks-be/issues/129

#### 선택지

- AWS Codedeploy
    - Codepipeline
        - CI : GitHub 연동을 기본적으로 지원하고 ***특정 브런치에 push*** 같은 트리거를 지ㅜ언합니다.
        - CD : ***appspec.yml*** 혹은 ***ecosystem.json*** 등을 사용해서 서버를 자동으로 실행할 수 있습니다.
        - Hooks : ***~script/before-install.sh*** 같은 CodeDeploy Hooks 실행에 제한사항이 없습니다.
        - ENV : CodePipeline 에 작업을 추가할 때, 환경변수를 json 파일안에 "namespace": "value" 구조로 넣어서 사용해야 합니다.
        - Pricing : 프리티어는 활성 CodePipeline 1 개 무료, 초과분은 개당 1$ / 1 month.
    - GitHub Action
        - GitHub 에 종속적인 툴이며, 별도로 S3 버킷 이 필요합니다.
        - CI : GitHub 의 Shell 에서 작동되며 ***특정 브런치에 push*** 뿐만 아니라, PR, Issue, Tags, Release 등의 다양한 상황에서도 트리거 작동이 가능합니다.
        - CD : 다양한 외부 공급자(CodeDeploy) 와 협력하여 많은 사이트에 배포 자동화를 제공해줍니다.
        - Hooks : ***~script/before-install.sh*** 같은 CodeDeploy Hooks 실행에 제한사항이 없습니다.
        - ENV : ***GitHub secret variables*** 을 이용하여, .env 파일을 생성하고 직접 변수를 주입할 수 있습니다.
        - Pricing : 개인 및 팀 단위에서는 월간/일간 제한시간을 기준으로 무료이며, 팀 단위는 ***44$ / 1 month, 1 people***  기업에서는 ***231$ / 1 month*** 의 비용이 요구 됩니다.

- 서드파티 어플리케이션
    - Circle CI
        - 통합 부터 배포까지 결합된 상태로 사용하는 서비스 입니다.
        - CI :GtiHub 연동을 기본적으로 지원하고 ***특정 브런치에 push*** 같은 트리거 지원됩니다.
        - CD : 모든 코드를 ***Docker 기반으로 배포***를 하기 때문에, Docker 를 잘 모르는 사용자는 이후의 고도화 단계 진행에 어려움을 겪을 수 있습니다.
        - ENV : 서비스 자체에서 안에 ***환경변수*** 를 주입해주는 서비스가 제공 되고 있습니다.
          예) NODE_VERSION=16 이런 식으로 가능합니다.
        - Pricing : 기본적으로 Free 를 제공, 추가적인 기능은 비용 청구 발생합니다.
    - Travis CI
        - 통합 부터 배포까지 결합된 상태로 사용하는 서비스 입니다.
        - CI :GitHub 연동을 기본적으로 지원하고 ***특정 브런치에 push*** 같은 트리거 지원됩니다.
        - CD : ***.travis.yml*** 을 기반으로 손쉬운 배포 자동화를 지원됩니다.
        - ENV : 서비스 자체에서 안에 ***환경변수*** 를 주입해주는 서비스가 제공되고 있습니다.
        - Pricing : 기본적으로 ***10000 Credit 을 한정*** 으로 무료인데, 생각보다 빨리 사라질 뿐더러 그 이후의 비용 청구가 개인 기준, ***69$ / 1 month*** , ***759$ / 1 year*** 으로 너무 비쌉니다.
    - Cyclic.sh
        - 통합 부터 배포까지 결합된 상태로 사용되는 서비스 입니다.
        - 최근에 나온 서비스고 ***무료 DynamoDB Storage*** 같은 저장 공간을 제공해줍니다.
        - 컨테이너, 이미지 기반이 아니라 ***서버리스*** 로 배포가 됩니다.
        - CI : GitHub 연동이 기본적으로 하고 ***특정 브런치에 push*** 같은 트리거 지원됩니다.
        - CD : 기본적으로 별도의 설정파일이 크게 필요 없이 배포 자동화를 지원합니다.
        - ENV : 서비스 자체에서 안에 ***환경변수*** 를 주입해주는 서비스가 제공되고 있습니다.
        - Pricing : 현재 단계에서는 ***영원히 무료*** 로 명시되어 있습니다.

### 후기