[< 뒤로가기](./README.md)

## 1. Raw Query vs ORM

```cmd
  1.1. 필요성
  1.2. 비교 대상 및 선택 동기
  1.3. 후기
```

<hr>

### 필요성

Sequelize 를 쓸 때, 다대다 관계를 맺으면 ***Seq.Models*** 의 수보다 테이블이 늘어나게 됩니다.
지난 두 번의 프로젝트에서 이러한 부분이 ***혼란*** 스럽게 느껴졌고 더욱 직관적으로 이해할 수 있는 ***로우 쿼리*** 는 어떤지 생각해보게 되었습니다.

<hr>

#### 선택지

다음과 같은 이유로 Raw Query 를 사용하고자 했습니다.

1. ***SQL Injection*** 같은 보안처리를 직접 해보고 싶었습니다.
2. 자료 조사를 했을 때, ***ORM*** 보다 ***Raw Query*** 가 더 빠르고 최적화를 할 수 있다라는 내용을 보았습니다. 해당 부분이, 저희 프로젝트의 ***데이터 특성*** 을 고려해보았을 떄, 목적 부합하다고 생각했습니다.

<hr>

### 후기

이번 기회에 ORM 을 쓰지 않아서 좋았던 점도 어려웠던 점도 명확하게 알았던 것 같습니다.

- 장점

```
Cupick 에서 메일링 시스템을 넣게 되면서 유저와 관련된 테이블이 복잡해 졌습니다.

평소에는 대부분의 값이 NOT NULL 이었는데, NULL 인 값이 대부분을 차지하면서 고려할 사항이 많아졌습니다.

필요에 따라서 테이블 및 쿼리문을 변경하면서, 기존의 Respository 의 메서드를 @deprecated  처리하고 새로운 메서드로 교체하는 리펙터링 작업을 6 번 넘게 진행했습니다. 
```

- 단점

```
ORM 이 제공하는 관계 메서드를 사용할 수 없다보니 서로 관계가 맺어져있는 테이블들의 정보를 활용하기가 상대적으로 어려웠습니다.
매핑 정보가 불명확하다보니 ERD에 대한 의존도가 높아졌습니다. 
```