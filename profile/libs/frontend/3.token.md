[< 뒤로가기](./README.md)

## 3. 토큰

```cmd
  3.1. 필요성
  3.2. 비교 대상 및 선택 동기
  3.3. 후기
```

<br>

> 초안은 더욱 다양한 내용을 가지고 있습니다. <br>
> 관련된 내용이 궁금하시다면, 다음 링크를 참고해주세요. <br>
> 초안 : [Notion/Cupick - React-jwt](https://www.notion.so/5e458f2e19c544dc99651f3af3e59d9c#4a48872eb90a4b56bdd99d683d3de41d)
> 초안 작성자 : -

<br>
<hr>

### 3.1. 필요성

Cupick 은 JWT 를 이용하여 사용자의 인증 처리 및 로그인 상태 관리 등을 하고 있습니다.

- 유효시간이 2 시간인 AccessToken
- 유효시간이 14 일인 RefreshToken

이러한 JWT 토큰은 사용자의 눈으로는 해석이 불가능한 긴 문자열의 형태를 띄고 있습니다.

따라서, 알 수 없는 형태의 문자열인 JWT 를 복호화 하여, 사용자 정보를 추출해 사용할 수 있도록 만들어야 했습니다.

<hr>

### 3.2. 비교 대상 및 선택 동기

***JWT 토큰*** 과 관련하여 다음과 같은 라이브러리를 고민하게 되었습니다.

1. jwt-decode
2. react-jwt

위 선택지 중에서 조금 더 ***편리하고 강력한 기능*** 을 지원해주는 react-jwt 를 선택하게 되었습니다.

해당 라이브러리 선택에서 오는 구체적인 장점은 다음과 같이 느껴졌습니다.

- ***decodedToken, isExpired*** 등의 메서드로 React 내부적으로 토큰의 만료 상태를 제어할 수 있었습니다.
- ***refreshtoken method*** 와 ***reEvaluateToken*** 를 통해서 useJWT 상태를 새로 업데이트 할 수 있습니다.

> 예시 코드 및 링크 첨부 필

> jwt-decode 를 선택하지 않은 이유는 <br> 
    > 해당 라이브러리는 간단하게 JWT 안의 값을 꺼내는 용도로는 좋으나 직접적으로 JWT 를 적극 활용하기에는 많이 부족했습니다.

<hr>


### 3.3. 후기

***react-jwt*** 라이브러리에서 지원하는 여러 메서드들을 이용해서 백엔드의 토큰 재발행 로직과 연계하여, ***axios interceptor*** 를 더욱 편리하게 만들 수 있었습니다.